# 预览功能修复

## 🐛 问题描述

用户点击预览时，某些网站（如 `www.gatsbyjs.com`）会显示"拒绝连接"错误。

## 🔍 问题原因

很多网站设置了 `X-Frame-Options: DENY` 或 `Content-Security-Policy: frame-ancestors 'none'`，禁止在iframe中嵌入。这是安全措施，防止点击劫持攻击。

## ✅ 修复方案

### 1. 添加错误状态处理
- 添加 `loadError` 状态来跟踪加载错误
- 当iframe无法加载时显示友好提示

### 2. 超时检测
- 如果iframe在5秒后仍在加载，可能是被阻止了
- 自动显示错误提示

### 3. 友好错误提示
- 显示清晰的错误信息
- 提供"在新窗口打开预览"按钮
- 提供"查看 GitHub 仓库"链接

## 🎯 用户体验改进

**之前**：
- 显示"拒绝连接"错误
- 用户不知道怎么办

**现在**：
- 显示友好的错误提示
- 明确说明原因（网站不允许在iframe中嵌入）
- 提供解决方案（在新窗口打开）

## 📝 修改的文件

- `components/TemplatePreview.tsx` - 添加错误处理和友好提示

## 🚀 测试

修复后，当预览无法加载时：
1. 显示友好的错误提示
2. 提供"在新窗口打开预览"按钮
3. 用户可以正常查看模板效果

