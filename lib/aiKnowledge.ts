// AI助手知识库
export const knowledgeBase: Record<string, string> = {
  '博客需要什么功能': `
对于个人博客，我建议包含以下功能：

✅ 必备功能：
1. 文章编辑和发布
2. Markdown支持
3. 代码高亮显示
4. 评论系统

⭐ 推荐功能：
1. RSS订阅
2. 搜索功能
3. 标签分类
4. 阅读统计

🚀 进阶功能：
1. SEO优化
2. 社交媒体分享
3. 邮件订阅
  `,
  
  '如何部署': `
部署非常简单，我们提供一键部署到Vercel：

步骤1：点击"一键部署"按钮
步骤2：授权GitHub账号（安全，可随时撤销）
步骤3：选择仓库名称
步骤4：等待3分钟
步骤5：获得你的网站链接！

不需要服务器、不需要域名，完全免费！
  `,
  
  '如何添加评论功能': `
评论系统推荐使用以下方案：

1. Giscus（推荐）
   - 基于GitHub Discussions
   - 完全免费
   - 无需数据库
   - 支持Markdown

2. Disqus
   - 功能丰富
   - 支持匿名评论
   - 需要注册账号

3. Utterances
   - 基于GitHub Issues
   - 轻量级
   - 完全免费

示例代码：

\`\`\`html
<!-- Giscus 评论系统 -->
<script src="https://giscus.app/client.js"
        data-repo="your-username/your-repo"
        data-repo-id="REPO_ID"
        data-category="Announcements"
        data-category-id="CATEGORY_ID"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="light"
        crossorigin="anonymous"
        async>
</script>
\`\`\`

更多信息：https://giscus.app/
  `,
  
  '如何绑定域名': `
在Vercel后台绑定自定义域名：

1. 登录Vercel控制台
2. 选择你的项目
3. 进入Settings → Domains
4. 添加你的域名
5. 按照提示配置DNS
6. 自动获得免费SSL证书

支持.com、.cn等所有域名后缀！
  `,
  
  '费用是多少': `
Vercel免费套餐包含：

✅ 无限项目
✅ 每月100GB流量
✅ 自动HTTPS
✅ 全球CDN
✅ 自动部署

对于个人博客和小型项目完全够用！
如果流量超过，可以升级到Pro套餐（$20/月）
  `,
  
  '待办应用需要什么功能': `
待办应用的核心功能：

✅ 必备：
1. 添加、删除任务
2. 标记完成
3. 分类管理

⭐ 推荐：
1. 优先级设置
2. 截止日期
3. 提醒功能

🚀 进阶：
1. 云端同步
2. 多人协作
3. 数据统计
  `,

  '如何选择模板': `
选择模板时，我建议：

1. 根据你的应用类型选择
   - 博客 → 选择博客模板
   - 待办 → 选择待办模板
   - 作品集 → 选择作品集模板

2. 查看模板评分
   - 评分高的模板更成熟稳定

3. 点击"快速预览"查看实际效果
   - 在线演示链接可以查看真实效果

4. 查看GitHub仓库
   - 了解代码质量
   - 查看更新频率
  `,

  '如何定制颜色': `
在定制化页面，你可以：

1. 选择主色调
   - 点击颜色选择器
   - 或输入颜色代码（如#8b5cf6）

2. 选择辅助色
   - 与主色搭配
   - 确保对比度足够

3. 实时预览
   - 右侧实时查看效果
   - 随时调整

💡 建议：选择2-3个主色调，保持整体风格统一
  `,

  '如何添加功能': `
在定制化页面，你可以：

1. 查看推荐功能
   - ✅ 必备组件（已包含）
   - ⭐ 推荐组件（可选择）
   - 🚀 进阶功能（可选）

2. 勾选需要的功能
   - 点击复选框选择
   - 实时更新配置

3. 查看功能说明
   - 每个功能都有详细描述
   - 了解功能和用途
  `,

  '部署失败怎么办': `
如果部署失败，可以尝试：

1. 检查GitHub连接
   - 确认账号已授权
   - 检查权限设置

2. 检查仓库名称
   - 只能包含字母、数字、连字符
   - 不能使用特殊字符

3. 检查网络连接
   - 确保网络稳定
   - 尝试刷新页面

4. 重新部署
   - 点击"重试"按钮
   - 或返回重新开始

如果仍然失败，请查看错误提示，或联系技术支持。
  `,

  '如何修改内容': `
部署成功后，你可以：

1. 在GitHub仓库中修改
   - 访问你的GitHub仓库
   - 编辑文件
   - 提交更改
   - Vercel会自动重新部署

2. 使用Git命令（高级）
   - 克隆仓库到本地
   - 修改文件
   - 提交并推送

💡 提示：Vercel会自动检测GitHub的更改，自动重新部署
  `,
};

// 关键词匹配（按优先级排序）
export const keywordAnswers: Record<string, string> = {
  '模板': '选择模板时，建议查看评分、预览效果和GitHub仓库。高分模板更稳定，预览可以看到实际效果。',
  '选择': '在首页选择应用类型，然后浏览推荐的3个最佳模板。点击"快速预览"可以查看实际效果。',
  '预览': '点击模板卡片上的"快速预览"按钮，可以在全屏窗口中查看模板的实际效果。也可以点击"在线演示"在新窗口打开。',
  '定制': '在定制化页面，你可以调整颜色、选择功能组件。右侧有实时预览，可以随时查看效果。',
  '颜色': '在定制化页面，你可以通过颜色选择器或输入颜色代码来定制应用的主色调、辅助色和强调色。',
  '功能': '在定制化页面，你可以查看推荐的功能组件。必备组件已包含，推荐组件和进阶功能可以选择。',
  '组件': '根据你的应用类型，我们会推荐相关组件。分为必备、推荐和进阶三个等级，你可以选择需要的功能。',
  '部署': '点击"一键部署"按钮，按照步骤：1)授权GitHub 2)创建仓库 3)连接Vercel 4)等待构建完成。全程约3分钟！',
  'github': '部署需要GitHub账号。如果没有，可以访问github.com免费注册。授权是安全的，可随时撤销。',
  'vercel': 'Vercel是一个免费的网站托管平台，由Next.js团队开发。提供免费HTTPS、全球CDN和自动部署。',
  '评论': '评论系统推荐使用 Giscus（基于GitHub Discussions）或 Disqus。Giscus完全免费，无需数据库。',
  '域名': '可以在Vercel后台绑定自定义域名，支持免费SSL证书。进入项目Settings → Domains添加即可。',
  '费用': 'Vercel免费套餐足够个人使用，每月100GB流量。如果超过可以升级到Pro套餐（$20/月）。',
  '博客': '博客需要文章编辑、Markdown支持、评论系统等核心功能。还可以添加RSS订阅、搜索等功能。',
  '待办': '待办应用需要添加删除任务、标记完成、分类管理等核心功能。可以添加优先级、截止日期等。',
  '作品集': '作品集需要项目展示、个人介绍、联系表单等核心功能。可以添加简历下载、博客模块等。',
  '电商': '电商需要商品目录、购物车、结算系统、支付集成等核心功能。可以添加用户账户、商品评价等。',
  '仪表盘': '仪表盘需要数据图表、表格管理、用户权限等核心功能。可以添加消息通知、数据导出等。',
  '落地页': '落地页需要首屏展示、功能展示、行动号召等核心功能。可以添加用户评价、价格方案等。',
  '修改': '部署成功后，在GitHub仓库中修改文件，Vercel会自动重新部署。你也可以克隆仓库到本地修改。',
  '失败': '如果部署失败，检查GitHub连接、仓库名称格式、网络连接。可以点击"重试"重新部署。',
  '帮助': '我是AI助手，可以回答关于模板选择、功能定制、部署过程等问题。有什么问题随时问我！',
};

export function getAnswer(question: string): string {
  const normalizedQuestion = question.trim().toLowerCase();
  
  // 精确匹配
  if (knowledgeBase[normalizedQuestion]) {
    return knowledgeBase[normalizedQuestion];
  }
  
  // 关键词匹配
  for (const [keyword, answer] of Object.entries(keywordAnswers)) {
    if (normalizedQuestion.includes(keyword.toLowerCase())) {
      return answer;
    }
  }
  
  // 默认回答
  return '抱歉，我还不太理解这个问题。你可以换个方式问，或者尝试问："博客需要什么功能？"、"如何部署？"、"如何添加评论功能？"等常见问题。';
}

