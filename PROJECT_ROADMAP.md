# GitHub App Builder - 项目路线图

> **项目目标**：一个智能应用生成平台，让普通人（不懂编程的人）通过简单的对话和选择，就能快速创建应用。

> **最后更新时间**：2024-12-19 下午（第四次更新）

---

## 📊 项目状态总览

### Web 端（快速模式）
- **总体进度**：97% ✅
- **当前阶段**：优化和完善（70%完成）
- **目标**：完成所有Web端功能后再开始桌面端

### 桌面端（定制模式）
- **总体进度**：0% ⏳
- **当前阶段**：规划阶段
- **目标**：Web端完成后开始

---

## 🎯 产品架构

```
┌─────────────────────────────────────────────────────┐
│           GitHub App Builder 产品矩阵                │
├─────────────────────────────────────────────────────┤
│                                                     │
│  入口层：Web平台 (github-app-builder.com)          │
│  ┌──────────────┐         ┌──────────────┐        │
│  │  快速模式    │         │  定制模式    │        │
│  │  (80%用户)   │         │  (20%用户)   │        │
│  └──────┬───────┘         └──────┬───────┘        │
│         │                        │                 │
│         ▼                        ▼                 │
│  ┌──────────────┐         ┌──────────────┐        │
│  │ 选择模板     │         │ 下载客户端    │        │
│  │ + 悬浮AI助手 │         │ (定制VS Code) │        │
│  │ → 3分钟上线  │         │ → 深度开发    │        │
│  └──────────────┘         └──────────────┘        │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 📝 Web 端功能清单（快速模式）

### ✅ 阶段1：核心框架（已完成 100%）

- [x] **环境搭建**
  - [x] Next.js 16.1.1 项目初始化
  - [x] TypeScript 配置
  - [x] Tailwind CSS 配置
  - [x] 依赖管理（zustand, framer-motion）

- [x] **基础架构**
  - [x] 类型定义系统 (`types/index.ts`)
  - [x] 状态管理 (`store/useAppStore.ts`)
  - [x] 模拟数据 (`data/mockData.ts`)
  - [x] 路由结构（5个核心页面）

- [x] **核心页面**
  - [x] 首页 (`/`) - 渐变背景、功能介绍、动画效果
  - [x] 选择类型页 (`/select-type`) - 6种应用类型选择
  - [x] 浏览模板页 (`/browse-templates`) - 模板展示和选择
  - [x] 定制化页 (`/customize`) - 颜色配置、功能选择
  - [x] 部署页 (`/deploy`) - 多步骤部署引导

### ✅ 阶段2：核心功能（已完成 100%）

- [x] **预览功能**
  - [x] 模板预览组件 (`components/TemplatePreview.tsx`)
  - [x] 在线演示链接
  - [x] 快速预览弹窗（全屏iframe）
  - [x] 模板截图显示
  - [x] 悬停预览效果

- [x] **智能推荐功能**
  - [x] 推荐数据系统 (`data/recommendations.ts`)
  - [x] 组件推荐组件 (`components/ComponentRecommendations.tsx`)
  - [x] 按应用类型推荐（必备/推荐/进阶）
  - [x] 组件选择逻辑
  - [x] 在定制化页面集成

- [x] **AI 问答助手**
  - [x] AI助手组件 (`components/AIAssistant.tsx`)
  - [x] 知识库系统 (`lib/aiKnowledge.ts`)
  - [x] 悬浮按钮（右下角）
  - [x] 聊天窗口界面
  - [x] 预设问题快速选择
  - [x] 智能问答（关键词匹配）
  - [x] 打字动画效果
  - [x] 全局集成（layout.tsx）

- [x] **一键部署功能**
  - [x] 多步骤引导流程
  - [x] GitHub授权步骤
  - [x] 仓库创建步骤
  - [x] Vercel连接步骤
  - [x] 构建进度显示
  - [x] 部署成功页面
  - [x] 后续指引

### ✅ 阶段3：用户体验优化（已完成 100%）

- [x] **进度指示**
  - [x] 进度指示器组件 (`components/ProgressIndicator.tsx`)
  - [x] 所有页面统一使用
  - [x] 步骤显示和动画

- [x] **错误处理**
  - [x] 错误边界 (`app/error.tsx`)
  - [x] 404页面 (`app/not-found.tsx`)
  - [x] 友好的错误提示

- [x] **响应式设计**
  - [x] 移动端适配
  - [x] 暗色模式支持
  - [x] 流畅动画效果

### 🔄 阶段4：优化和完善（进行中 70%）

- [x] **AI助手增强**
  - [x] 添加上下文感知（知道用户在哪个页面）✅
  - [x] 添加快捷操作按钮（复制代码、跳转等）✅
  - [x] 扩展知识库（更多问答）✅
  - [x] 完善关键词匹配 ✅
  - [x] 支持代码块显示 ✅
  - [x] 支持链接点击 ✅

- [x] **预览功能优化**
  - [ ] 添加更多真实模板截图
  - [x] 优化预览窗口体验 ✅
  - [x] 添加预览加载状态 ✅
  - [x] 支持预览窗口缩放（全屏/退出全屏）✅

- [x] **部署功能完善**
  - [x] 接入真实GitHub API（OAuth + 创建仓库）✅
  - [x] 接入真实Vercel API（部署 + 状态查询）✅
  - [ ] 添加部署日志
  - [ ] 支持部署失败重试
  - [ ] 添加部署历史

- [ ] **数据优化**
  - [ ] 接入真实GitHub项目搜索
  - [ ] 模板评分算法
  - [ ] 模板缓存机制
  - [ ] 添加更多模板数据

- [ ] **性能优化**
  - [ ] 图片懒加载
  - [ ] 代码分割优化
  - [ ] API请求缓存
  - [ ] 首屏加载优化

- [ ] **测试和修复**
  - [ ] 完整流程测试
  - [ ] 浏览器兼容性测试
  - [ ] 移动端测试
  - [ ] 性能测试
  - [ ] Bug修复

### 📋 Web端待办清单（优先级排序）

#### 🔴 高优先级（本周完成）

1. **AI助手上下文感知**
   - 检测当前页面
   - 根据页面提供相关建议
   - 添加快捷操作

2. **扩展知识库**
   - 添加更多常见问题
   - 完善关键词匹配
   - 添加代码示例

3. **部署功能测试**
   - 完整流程测试
   - 错误处理测试
   - 用户体验优化

#### 🟡 中优先级（下周完成）

4. **模板数据优化**
   - 添加更多真实截图
   - 完善模板描述
   - 优化推荐算法

5. **性能优化**
   - 图片优化
   - 代码分割
   - 缓存策略

6. **UI/UX优化**
   - 动画优化
   - 交互反馈
   - 移动端体验

#### 🟢 低优先级（后续迭代）

7. **接入真实API**
   - GitHub API集成
   - Vercel API集成
   - 错误处理完善

8. **高级功能**
   - 部署历史
   - 用户账户
   - 项目管理

---

## 🖥️ 桌面端规划（定制模式）

> **注意**：只有完成所有Web端功能后，才开始桌面端开发！

### 📐 架构设计

```
┌─────────────────────────────────────────────────┐
│      定制版 VS Code (Electron)                  │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌──────────────┐       ┌──────────────┐      │
│  │  交互界面    │  ←→  │  AI对话窗口  │      │
│  │  (默认显示)  │       │  (右侧常驻)  │      │
│  └──────┬───────┘       └──────┬───────┘      │
│         │                      │               │
│         │   ┌──────────────────▼────┐         │
│         │   │   设计图管理器        │         │
│         │   │ - 表层设计历史         │         │
│         │   │ - 功能设计图           │         │
│         │   │ - 自动版本控制         │         │
│         │   └───────────────────────┘         │
│         │                                      │
│         ▼                                      │
│  ┌──────────────────────────────────────┐    │
│  │    隐藏式 VS Code (可一键显示)        │    │
│  │  - 完整的代码编辑器                   │    │
│  │  - 终端（错误可见）                   │    │
│  │  - 文件管理                          │    │
│  │  - Git集成                           │    │
│  └──────────────────────────────────────┘    │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 🛠️ 技术栈

```json
{
  "框架": "Electron + VS Code Core",
  "UI框架": "React + Tailwind CSS",
  "AI集成": "Claude API / OpenAI API",
  "设计工具": "Excalidraw (嵌入式白板)",
  "终端": "xterm.js",
  "文件系统": "Node.js fs",
  "Git": "simple-git",
  "代码编辑器": "Monaco Editor (VS Code核心)"
}
```

### 📦 核心功能模块

#### 1. 交互界面（非程序员友好）

**设计模式**
- [ ] 可视化设计画布（类似Figma）
- [ ] 拖拽式组件添加
- [ ] 实时样式预览
- [ ] 设计图导出

**代码模式（简化版）**
- [ ] 文件树导航
- [ ] 代码预览（只读，带语法高亮）
- [ ] 简化编辑界面
- [ ] 一键切换到完整代码视图

**快捷工具**
- [ ] 添加容器按钮
- [ ] 添加文本按钮
- [ ] 选择颜色工具
- [ ] 插入图片工具

#### 2. AI对话窗口（右侧常驻）

**基础功能**
- [ ] 实时对话界面
- [ ] 文件上传支持
- [ ] 图片上传支持
- [ ] 代码粘贴支持

**智能功能**
- [ ] 错误自动识别（从终端捕获）
- [ ] 一键复制错误到AI
- [ ] 路径选择建议
- [ ] 代码生成建议

**上下文感知**
- [ ] 识别当前编辑的文件
- [ ] 识别当前选择的代码
- [ ] 提供相关建议

#### 3. 设计图管理器

**功能**
- [ ] 设计历史记录
- [ ] 设计图缩略图
- [ ] 版本对比
- [ ] 一键回退
- [ ] 自动版本控制

**设计同步**
- [ ] 设计图 → 代码（自动生成）
- [ ] 代码 → 设计图（反向解析）
- [ ] 实时同步

#### 4. 隐藏式VS Code（可一键显示）

**核心功能**
- [ ] 完整代码编辑器（Monaco Editor）
- [ ] 终端窗口（xterm.js）
- [ ] 文件管理器
- [ ] Git集成
- [ ] 代码补全
- [ ] 语法高亮

**特殊功能**
- [ ] 错误自动捕获
- [ ] 错误复制到AI
- [ ] 一键切换视图

#### 5. 错误终端（简化版）

**功能**
- [ ] 只显示错误和警告
- [ ] 错误详情展示
- [ ] 一键复制到AI
- [ ] 自动修复建议

#### 6. 预判式交互

**功能**
- [ ] 监听用户操作
- [ ] 预测用户意图
- [ ] 主动提供建议
- [ ] 快捷操作提示

**示例场景**
- 用户添加按钮 → 建议添加点击事件
- 用户多次修改颜色 → 建议生成配色方案
- 用户添加图片 → 建议优化图片

### 🎯 开发路线图

#### 阶段1：基础框架搭建（预计1-2周）

- [ ] **Electron项目初始化**
  - [ ] 创建Electron项目
  - [ ] 配置构建系统
  - [ ] 设置开发环境
  - [ ] 配置热更新

- [ ] **窗口管理**
  - [ ] 主窗口创建
  - [ ] 窗口布局管理
  - [ ] 视图切换逻辑
  - [ ] 窗口状态保存

- [ ] **基础UI框架**
  - [ ] React集成
  - [ ] Tailwind CSS配置
  - [ ] 路由系统
  - [ ] 状态管理

#### 阶段2：交互界面开发（预计2-3周）

- [ ] **设计模式**
  - [ ] 设计画布集成（Excalidraw或自定义）
  - [ ] 组件库实现
  - [ ] 拖拽功能
  - [ ] 样式配置面板

- [ ] **代码模式（简化版）**
  - [ ] 文件树组件
  - [ ] 代码预览组件
  - [ ] 简化编辑器

- [ ] **工具栏**
  - [ ] 快捷工具实现
  - [ ] 工具栏布局
  - [ ] 工具交互

#### 阶段3：AI集成（预计1-2周）

- [ ] **AI对话窗口**
  - [ ] 聊天界面实现
  - [ ] 消息处理
  - [ ] 文件上传
  - [ ] 图片上传

- [ ] **AI API集成**
  - [ ] Claude API集成
  - [ ] 消息流处理
  - [ ] 错误处理
  - [ ] API密钥管理

- [ ] **智能功能**
  - [ ] 错误识别
  - [ ] 上下文感知
  - [ ] 建议生成

#### 阶段4：VS Code集成（预计2-3周）

- [ ] **Monaco Editor集成**
  - [ ] 编辑器初始化
  - [ ] 语法高亮
  - [ ] 代码补全
  - [ ] 主题配置

- [ ] **终端集成**
  - [ ] xterm.js集成
  - [ ] 命令执行
  - [ ] 输出捕获
  - [ ] 错误识别

- [ ] **文件系统**
  - [ ] 文件读写
  - [ ] 文件监听
  - [ ] 文件管理
  - [ ] 项目结构

- [ ] **Git集成**
  - [ ] simple-git集成
  - [ ] Git操作
  - [ ] 状态显示
  - [ ] 提交管理

#### 阶段5：设计图管理（预计1-2周）

- [ ] **设计历史**
  - [ ] 历史记录存储
  - [ ] 缩略图生成
  - [ ] 历史查看
  - [ ] 版本对比

- [ ] **设计同步**
  - [ ] 设计→代码生成
  - [ ] 代码→设计解析
  - [ ] 实时同步
  - [ ] 冲突处理

#### 阶段6：优化和测试（预计1-2周）

- [ ] **性能优化**
  - [ ] 启动速度优化
  - [ ] 内存优化
  - [ ] 渲染优化

- [ ] **测试**
  - [ ] 功能测试
  - [ ] 兼容性测试
  - [ ] 性能测试
  - [ ] 用户体验测试

- [ ] **打包发布**
  - [ ] Windows版本
  - [ ] macOS版本
  - [ ] Linux版本
  - [ ] 自动更新机制

### 📋 桌面端关键技术点

#### 1. Electron + VS Code Core集成

```typescript
// 关键挑战：如何嵌入VS Code核心功能
// 方案1：使用Monaco Editor（轻量级）
// 方案2：使用VS Code Extension API（完整功能）
// 方案3：使用VS Code OSS（开源版本，需要大量修改）

推荐：方案1（Monaco Editor）+ 自定义功能
```

#### 2. 设计图与代码双向同步

```typescript
// 设计图 → 代码
function generateCodeFromDesign(design: Design): string {
  // 解析设计图结构
  // 生成React组件代码
  // 生成样式代码
  return code
}

// 代码 → 设计图
function parseCodeToDesign(code: string): Design {
  // 解析代码结构
  // 提取组件信息
  // 生成设计图数据
  return design
}
```

#### 3. 错误智能诊断

```typescript
// 终端错误捕获
terminal.onData((data) => {
  if (isError(data)) {
    const diagnosis = analyzeError(data)
    showInAI({
      type: 'error',
      message: data.message,
      suggestion: diagnosis.solution,
      quickFix: diagnosis.autoFix
    })
  }
})
```

#### 4. 预判式交互

```typescript
// 监听用户操作
watchUserActions((action) => {
  if (action.type === 'add-button') {
    suggestNextStep('要给这个按钮添加功能吗？')
  }
  
  if (action.type === 'change-color' && action.count > 3) {
    suggest('我帮你生成一套完整的配色方案？')
  }
})
```

### 🚨 桌面端开发注意事项

1. **性能考虑**
   - Electron应用体积较大
   - 需要优化启动速度
   - 注意内存使用

2. **跨平台兼容**
   - Windows、macOS、Linux
   - 文件路径处理
   - 系统API差异

3. **安全性**
   - API密钥存储
   - 文件系统访问权限
   - 代码执行安全

4. **用户体验**
   - 非程序员友好的界面
   - 清晰的错误提示
   - 流畅的交互

---

## 📅 时间规划

### Web端时间表

- **阶段1-3（已完成）**：2024-12（2周）
- **阶段4（进行中）**：2024-12 下旬（1-2周）
- **预计完成时间**：2024-12 月底

### 桌面端时间表

- **开始时间**：Web端完成后（预计2025-01）
- **阶段1-2**：2-3周（基础框架+交互界面）
- **阶段3-4**：3-5周（AI集成+VS Code集成）
- **阶段5-6**：2-3周（设计管理+优化测试）
- **预计完成时间**：2025-02 中旬

---

## 📝 开发规范

### 代码规范
- 使用TypeScript
- 遵循ESLint规则
- 组件化开发
- 注释清晰

### Git规范
- 功能分支：`feature/功能名称`
- 修复分支：`fix/问题描述`
- 提交信息：清晰的描述

### 文档规范
- 重要功能需要文档
- API需要类型定义
- 复杂逻辑需要注释

---

## 🎯 成功标准

### Web端
- [x] 完整用户流程可运行
- [x] 所有核心功能实现
- [ ] 性能达标（首屏<2s）
- [ ] 浏览器兼容性良好
- [ ] 移动端体验良好
- [ ] 错误处理完善

### 桌面端
- [ ] 基础功能可用
- [ ] AI对话流畅
- [ ] 设计图与代码同步准确
- [ ] 错误诊断准确
- [ ] 性能良好
- [ ] 跨平台兼容

---

## 📚 参考资料

### 技术文档
- [Next.js 文档](https://nextjs.org/docs)
- [Electron 文档](https://www.electronjs.org/docs)
- [VS Code API](https://code.visualstudio.com/api)
- [Monaco Editor](https://microsoft.github.io/monaco-editor/)

### 设计参考
- [Figma](https://www.figma.com/)
- [Excalidraw](https://excalidraw.com/)
- [VS Code](https://code.visualstudio.com/)

---

## 🔄 更新日志

### 2024-12-19（下午 - 第四次更新）
- ✅ 集成真实GitHub OAuth
  - 创建GitHub OAuth API路由
  - 实现OAuth回调处理
  - 添加用户信息存储（Cookie）
- ✅ 集成真实Vercel部署API
  - 创建Vercel部署API路由
  - 实现部署状态轮询
  - 更新部署页面使用真实API
- ✅ 创建GitHub API工具函数
  - 创建仓库功能
  - 获取用户信息
  - 检查仓库是否存在
- ✅ 创建部署指南文档
  - 完整的部署步骤
  - 环境变量配置说明
  - 常见问题解答

### 2024-12-19（下午 - 第三次更新）
- ✅ 修复React错误
  - 修复定制化页面：setState在渲染期间调用的问题
  - 修复部署页面：setState在渲染期间调用的问题
  - 使用useEffect正确管理状态更新
- ✅ 添加模式选择说明
  - 创建ModeSelector组件
  - 在首页显示Web端和桌面端的对比
  - 明确说明：简单业务用Web端，自定义开发用桌面端
- ✅ 修复图片配置
  - 配置Unsplash图片域名
  - 修复next/image组件配置

### 2024-12-19（下午 - 第二次更新）
- ✅ AI助手完整增强
  - 添加快捷操作按钮（复制消息、页面跳转）
  - 支持代码块显示（语法高亮、复制功能）
  - 支持链接点击（自动识别并可点击）
  - 智能快捷操作（根据内容检测并显示相关操作按钮）
- ✅ 预览功能完整优化
  - 添加加载状态显示
  - 支持全屏/退出全屏功能
  - 优化预览窗口体验
  - 改进响应式布局

### 2024-12-19（下午 - 第一次更新）
- ✅ AI助手添加上下文感知功能
  - 根据当前页面显示相关问题
  - 添加页面提示信息
- ✅ 扩展知识库
  - 添加更多常见问题（选择模板、定制颜色、添加功能等）
  - 完善关键词匹配（模板、预览、定制、部署等）
- ✅ 创建上下文感知系统（lib/contextAware.ts）
- ✅ 创建消息解析系统（lib/messageParser.ts）

### 2024-12-19（上午）
- ✅ 创建项目路线图文档
- ✅ Web端核心功能已完成（95%）
- ✅ 桌面端规划完成
- 🔄 开始Web端优化阶段

---

## 💡 重要提醒

1. **优先级**：先完成所有Web端功能，再开始桌面端
2. **进度跟踪**：定期更新此文档，标记完成状态
3. **不要跳跃**：按照阶段顺序开发，不要同时进行多个大功能
4. **测试驱动**：重要功能需要测试
5. **用户体验**：始终以用户体验为核心

---

**记住：完成一个功能，就在文档中标记 ✅，保持清晰的进度跟踪！**

